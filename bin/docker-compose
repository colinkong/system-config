#!/bin/sh
#
# Wrapper for "python"
#
VERSION=20171231

. `dirname "$0"`/pyld_mod.sh

PY_MAIN=`basename "$0"`
case $PY_MAIN in
python*)
    PYEXE="$PY_MAIN"
    ;;
pip)
    PYEXE=python
    ;;
*)
    PYEXE=python3
    ;;
esac

PYTHON=`locate_python "$@"`
if [ "$PYTHON" ]
then
    if [ "$PYEXE" != "$PY_MAIN" ]
    then
        BIN_DIR=`dirname "$PYTHON"`
        TOOL=`locate_python_tool "$BIN_DIR" "$PY_MAIN"`
        if [ "$TOOL" ]
        then
            exec $PYTHON $TOOL "$@"
        fi
    fi
else
    PYTHON=`which \`basename "$0"\``
    if [ ! "$PYTHON" ]
    then
        echo "***ERROR*** Cannot find required \"`basename \"$0\"`\" software." 1>&2
        exit 1
    fi
fi

unset PYTHONSTARTUP PYTHONHOME
if [ ! "`echo \":$PATH:\" | grep \":\`dirname $0\`:\"`" ]
then
    PATH=`dirname $0`:$PATH; export PATH
fi

if [ "$PYEXE" = "$PY_MAIN" ]
then
    exec $PYTHON "$@"
else
    if [ ! "`which \"$PY_MAIN\"`" ]
    then
        echo "***ERROR*** Cannot find required \"$PY_NAME\" software." 1>&2
    fi
    exec `which "$PY_MAIN"` "$@"
fi
